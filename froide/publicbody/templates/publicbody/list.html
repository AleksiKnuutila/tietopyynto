{% extends 'publicbody/base.html' %}

{% load i18n %}

{% block body %}

<div class="row">
  <div class="col-md-9 col-lg-9">
    <h2>
      {% blocktrans %}Public Bodies{% endblocktrans %}
    </h2>
  </div>
</div>

<div class="row">
  <div class="col-md-9 col-lg-9">
    <div class="row">
      {% include "publicbody/_search_form.html" %}
    </div>
    <div class="row top-buffer">
      <div class="col-lg-12">
        <ul class="media-list">
          {% for object in object_list %}
          <li class="media">
            {% include "publicbody/snippets/publicbody_item.html" %}
          </li>
        {% endfor %}
        </ul>
        {% include "pagination/pagination.html" with page_obj=object_list %}
      </div>
    </div>
  </div>
  <div class="col-md-3 col-lg-3">
    <h3>{% trans "Jurisdictions" %}</h3>
    <div class="list-group">
      {% for juris in jurisdictions %}
        {% if topic and jurisdiction == juris %}
          {% url 'publicbody-list' topic=topic.slug as jur_url %}
        {% elif topic %}
          {% url 'publicbody-list' jurisdiction=juris.slug topic=topic.slug as jur_url %}
        {% elif jurisdiction == juris %}
          {% url 'publicbody-list' as jur_url %}
        {% else %}
          {% url 'publicbody-list' jurisdiction=juris.slug as jur_url %}
        {% endif %}
        <a class="list-group-item{% if jurisdiction == juris %} active{% endif %}" href="{{ jur_url }}">
          <span class="badge">{{ juris.num_publicbodies }}</span>
          <img src="{{ STATIC_URL }}img/jurisdictions/{{ juris.slug }}_small.png" alt="{{ juris.name }}"/>
          {{ juris.name }}
        </a>
      {% endfor %}
    </div>
    <h3>{% trans "Topics" %}</h3>
    <div class="list-group">
      {% for top in topics %}
        {% if jurisdiction and topic == top %}
          {% url 'publicbody-list' jurisdiction=jurisdiction.slug as top_url %}
        {% elif jurisdiction %}
          {% url 'publicbody-list' jurisdiction=jurisdiction.slug topic=top.slug as top_url %}
        {% elif topic == top %}
          {% url 'publicbody-list' as top_url %}
        {% else %}
          {% url 'publicbody-list' topic=top.slug as top_url %}
        {% endif %}
        <a class="list-group-item{% if topic == top %} active{% endif %}" href="{{ top_url }}">
          <span class="badge">{{ top.num_publicbodies }}</span>
          <img src="{{ STATIC_URL }}img/topics/{{ top.slug }}_small.png" alt="{{ juris.name }}"/>
          {{ top.name }}
        </a>
      {% endfor %}
    </div>
  </div>
</div>

{% endblock %}
